<!doctype html>
<html lang="nl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
<meta name="theme-color" content="#0ea5e9"/>
<title>Tievie v3.40 — autoseed + dropdown-fix</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="manifest" href="./manifest.json">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root { color-scheme: dark; }
  body{background:#0b1020;color:#e5e7eb;font-family:'Inter',ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,'Apple Color Emoji','Segoe UI Emoji'}
  .glass{background:rgba(255,255,255,.9);color:#0f172a;backdrop-filter:saturate(150%) blur(12px)}
  .pill{border:1px solid rgba(15,23,42,.08)}
  #status{position:fixed;right:12px;bottom:12px;background:#0ea5e9;color:#03111a;padding:.35rem .6rem;border-radius:.6rem;font-size:.8rem;z-index:9999}
  #imdbOverlay{position:fixed;inset:0;background:rgba(2,6,23,.7);backdrop-filter:blur(6px);display:none;align-items:center;justify-content:center;z-index:100000}
  #suggest{position:fixed;display:none;z-index:100001}
  select,.our-score-input{background:#fff!important;color:#0f172a!important;border:1px solid rgba(15,23,42,.12)!important}
</style>
</head>

<body>
<div class="max-w-7xl mx-auto p-4 pb-28">
  <header class="mb-4">
    <div class="mb-3 flex flex-wrap items-center justify-between gap-3">
      <h1 class="text-2xl font-bold">Tievie <span id="netBadge" class="badge">…</span></h1>
      <div class="flex gap-2 items-center">
        <input id="file-import" type="file" accept="application/json" class="hidden"/>
        <button id="btn-import" class="px-3 py-2 rounded-xl bg-white/80 hover:bg-white text-slate-900 shadow text-sm pill">Importeer JSON</button>
        <button id="btn-export" class="px-3 py-2 rounded-xl bg-white/80 hover:bg-white text-slate-900 shadow text-sm pill">Exporteer alles</button>
        <button id="btn-posters" class="px-3 py-2 rounded-xl bg-emerald-500 hover:bg-emerald-600 text-white shadow text-sm pill">Posters ophalen</button>
      </div>
    </div>

    <div class="glass rounded-xl p-3 shadow mb-3 flex flex-wrap items-center gap-3">
      <label for="sortBy" class="text-sm text-slate-700">Sorteren</label>
      <select id="sortBy" class="px-2 py-1.5 rounded-lg bg-white/90 shadow text-sm pill">
        <option value="created_desc" selected>Nummer (recent → oud)</option>
        <option value="created_asc">Nummer (oud → recent)</option>
        <option value="imdb_desc">IMDb hoog → laag</option>
        <option value="imdb_asc">IMDb laag → hoog</option>
        <option value="score_desc">Onze score hoog → laag</option>
        <option value="score_asc">Onze score laag → hoog</option>
        <option value="title_asc">Titel A → Z</option>
        <option value="title_desc">Titel Z → A</option>
      </select>
      <div class="h-5 w-px bg-slate-200/70 mx-1"></div>
      <label for="filterStreaming" class="text-sm text-slate-700">Streaming</label>
      <select id="filterStreaming" class="px-2 py-1.5 rounded-lg bg-white/90 shadow text-sm pill">
        <option value="">Alle diensten</option>
        <option>Streamz</option>
        <option>Netflix</option>
        <option>Prime Video</option>
        <option>Apple TV+</option>
        <option>VRT MAX</option>
        <option>Go Play</option>
        <option>NPO</option>
        <option>Disney+</option>
        <option value="__UNKNOWN__">Onbekend</option>
      </select>
      <span id="countBadge" class="ml-auto text-sm text-slate-700"></span>
    </div>

    <div class="glass rounded-xl p-3 shadow mb-3">
      <div class="flex flex-wrap items-center gap-2">
        <div class="relative grow min-w-[260px]">
          <input id="add-search" type="search" placeholder="Zoek en voeg toe…" class="w-full px-3 py-2 rounded-lg bg-white/90 shadow" autocomplete="off">
        </div>
        <select id="add-type" class="px-2 py-2 rounded-lg bg-white/90 shadow">
          <option value="film" selected>Film</option>
          <option value="serie">Serie</option>
          <option value="herman-film">H-Film</option>
          <option value="herman-serie">H-Serie</option>
          <option value="aan-het-kijken">Aan het kijken</option>
          <option value="bekeken">Bekeken</option>
        </select>
        <select id="add-stream" class="px-2 py-2 rounded-lg bg-white/90 shadow">
          <option value="">Onbekend</option>
          <option>Streamz</option>
          <option>Netflix</option>
          <option>Prime Video</option>
          <option>Apple TV+</option>
          <option>VRT MAX</option>
          <option>Go Play</option>
          <option>NPO</option>
          <option>Disney+</option>
        </select>
        <button id="btn-add" class="px-3 py-2 rounded-xl bg-indigo-600 hover:bg-indigo-700 text-white shadow">Voeg toe</button>
      </div>
    </div>
  </header>

  <section class="mb-3">
    <div id="filterControls" class="flex flex-wrap items-center gap-2">
      <button class="filter-btn px-3 py-1.5 rounded-lg bg-sky-500 text-white pill" data-filter="film">Films</button>
      <button class="filter-btn px-3 py-1.5 rounded-lg bg-white/30 hover:bg-white/40 text-white pill" data-filter="serie">Series</button>
      <button class="filter-btn px-3 py-1.5 rounded-lg bg-white/30 hover:bg-white/40 text-white pill" data-filter="herman-film">H-Films</button>
      <button class="filter-btn px-3 py-1.5 rounded-lg bg-white/30 hover:bg-white/40 text-white pill" data-filter="herman-serie">H-Series</button>
      <button class="filter-btn px-3 py-1.5 rounded-lg bg-white/30 hover:bg-white/40 text-white pill" data-filter="aan-het-kijken">Aan het kijken</button>
      <button class="filter-btn px-3 py-1.5 rounded-lg bg-white/30 hover:bg-white/40 text-white pill" data-filter="bekeken">Bekeken</button>
      <button class="filter-btn px-3 py-1.5 rounded-lg bg-white/30 hover:bg-white/40 text-white pill" data-filter="all">Alles</button>
      <div class="flex-1"></div>
      <input id="search" type="search" placeholder="Zoeken in lijst…" class="px-3 py-2 rounded-lg bg-white/40 text-white placeholder-white/70 shadow w-56 pill"/>
    </div>
  </section>

  <main>
    <div id="list" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"></div>
    <p id="empty" class="hidden text-center text-slate-200 py-10">Je lijst is leeg.</p>
  </main>
</div>

<div id="imdbOverlay">
  <div id="imdbPanel">
    <div id="imdbBar">
      <div class="flex items-center gap-2"><span class="text-sm opacity-80">IMDb</span></div>
      <button id="imdbClose" class="px-2 py-1 rounded bg-white/10 hover:bg-white/20">✕</button>
    </div>
    <iframe id="imdbFrame" sandbox="allow-scripts allow-same-origin allow-forms"></iframe>
  </div>
</div>

<div id="suggest">
  <div class="card glass rounded-xl shadow-2xl border border-slate-200 p-2">
    <div id="suggest-list"></div>
    <div id="suggest-empty" class="p-3 text-sm text-slate-500 hidden">Geen resultaten…</div>
  </div>
</div>

<div id="status">v3.40 — dropdown + score-edit fix</div>

<script src="./Tievie-v3.40.js?v=403"></script>
</body>
</html>
